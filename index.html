<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="author" content="Cédric Champeau (@CedricChampeau), Gradle" /><title>: Minutes to seconds, maximizing incrementality</title><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport" /><link href="reveal.js/css/reveal.css" rel="stylesheet" /><link rel="stylesheet" href="reveal.js/css/theme/summit.css" id="theme" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" /><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet" /><script>document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title" data-transition="zoom" data-transition-speed="fast" data-background-image="./images/title.jpeg"><h1></h1><h2>Minutes to seconds, maximizing incrementality</h2><div class="preamble"><link rel="stylesheet" type="text/css" href="reveal.js/css/theme/asciinema-player.css" />
<link rel="stylesheet" type="text/css" href="reveal.js/css/theme/github-gist.css" />
<script src="reveal.js/css/theme/asciinema-player.js"></script>
<script src="reveal.js/css/theme/cytoscape.min.js"></script>
<script src="https://cdn.rawgit.com/cpettitt/dagre/v0.7.4/dist/dagre.min.js"></script>
<script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-dagre/1.5.0/cytoscape-dagre.js"></script>
<script src="reveal.js/css/theme/dependency-graph.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.4/d3.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script></div><p class="author"><small>Cédric Champeau (@CedricChampeau), Gradle</small></p></section>
<section id="who-am-i"><h2>Who am I</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">speaker {
    name 'Cédric Champeau'
    company 'Gradle Inc'
    oss 'Apache Groovy committer',
    successes 'Static type checker',
              'Static compilation',
              'Traits',
              'Markup template engine',
              'DSLs'
        failures Stream.of(bugs),
        twitter '@CedricChampeau',
        github 'melix',
        extraDescription '''Groovy in Action 2 co-author
Misc OSS contribs (Gradle plugins, deck2pdf, jlangdetect, ...)'''
}</code></pre></div></div></section>
<section id="agenda"><h2>Agenda</h2><div class="ulist"><ul><li><p>Incremental builds</p></li><li><p>Compile avoidance</p></li><li><p>Incremental compilation</p></li><li><p>Variant-aware dependency management</p></li></ul></div></section>
<section id="incremental-builds" data-background-color="#01303a"><h2>Incremental builds</h2></section>
<section><section id="why-does-it-matter"><h2>Why does it matter?</h2><div class="ulist"><ul><li><p>Gradle is meant for incremental builds</p></li><li><p><code>clean</code> is a waste of time</p></li><li><p>Time is $$$</p></li></ul></div></section><section id="gradle-team"><h2>Gradle team</h2><div class="ulist"><ul><li><p>~30 developers</p></li><li><p>~20000 builds per week</p></li><li><p>1 min saved means 333 hours/week!</p></li></ul></div></section></section>
<section id="the-incrementality-test"><h2>The incrementality test</h2><div class="ulist"><ul><li class="fragment"><p>Run a build</p></li><li class="fragment"><p>Run again with no change</p></li><li class="fragment"><p>If a task was re-executed, you got it wrong</p></li></ul></div></section>
<section><section id="properly-writing-tasks"><h2>Properly writing tasks</h2></section><section id="example-building-a-shaded-jar"><h2>Example: building a shaded jar</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">task shadedJar(type: ShadedJar) {
   jarFile = file("$buildDir/libs/shaded.jar")
   classpath = configurations.runtime
   mapping = ['org.apache': 'shaded.org.apache']
}</code></pre></div></div>
<div class="ulist"><ul><li><p>What are the task inputs?</p></li><li><p>What are the task outputs?</p></li><li><p>What if one of them changes?</p></li></ul></div></section><section id="declaring-inputs"><h2>Declaring inputs</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">public class ShadedJar extends DefaultTask {
   ...
   @InputFiles
   FileCollection getClasspath() { ... }

   @Input
   Map&lt;String, String&gt; getMapping() { ... }
}</code></pre></div></div></section><section id="declaring-outputs"><h2>Declaring outputs</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">public class ShadedJar extends DefaultTask {
   ...

   @OutputFile
   File getJarFile() { ... }
}</code></pre></div></div></section><section id="know-why-your-task-is-out-of-date"><h2>Know why your task is out-of-date</h2><div class="imageblock" style=""><img src="./images/task-out-of-date.png" alt="task out of date" width="1280" height="415" /></div></section><section id="incremental-task-inputs"><h2>Incremental task inputs</h2><div class="ulist"><ul><li><p>Know precisely <em>which</em> files have changed</p></li><li><p>Task action can perform the minimal amount of work</p></li></ul></div></section><section id="incremental-task-inputs-2"><h2>Incremental task inputs</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@TaskAction
public void execute(IncrementalTaskInputs inputs) {
   if (!inputs.isIncremental()) {
      // clean build, for example
      // ...
   } else {
      inputs.outOfDate(change -&gt;
         if (change.isAdded()) {
           ...
         } else if (change.isRemoved()) {
           ...
         } else {
            ...
         }
      });
   }
}</code></pre></div></div></section></section>
<section><section id="compile-avoidance" data-background-color="#01303a"><h2>Compile avoidance</h2></section><section id="compile-classpath-leakage"><h2>Compile classpath leakage</h2></section><section id="a-typical-dependency-graph" data-state="show-dep-graph0"><h2>A typical dependency graph</h2><div id="cy0" class="drawing"></div>

<script>
addDependencyGraph(0, function() {});
</script></section><section id="cascading-recompilation" data-state="show-dep-graph1"><h2>Cascading recompilation</h2><div id="cy1" class="drawing"></div>

<script>
addDependencyGraph(1, function(cy) {
   var highlightNextEle = function(elts){
       for (i=0; i<elts.length; i++) {
          elts[i].addClass('highlighted');
          var incomingEdges = elts[i].incomers('edge');
          (function(incomingEdges) {
             setTimeout(function() {
                for (j=0; j<incomingEdges.length; j++) {
                   incomingEdges[j].addClass('highlighted');
                };
                highlightNextEle(incomingEdges.sources());
             }, 1000);
          })(incomingEdges);
       }


   };

   // kick off first highlight
   highlightNextEle(cy.$('#i'));
});
</script></section><section id="cascading-recompilation-2"><h2>Cascading recompilation</h2><div class="paragraph"><p>But also with side effects:</p></div>
<div class="ulist"><ul><li><p>compile dependencies <em>leak</em> to the downstream consumers</p></li><li><p>hard to upgrade dependencies without breaking clients</p></li></ul></div></section></section>
<section><section id="separating-api-and-implementation" data-background-color="#01303a"><h2>Separating API and implementation</h2></section><section id="example"><h2>Example</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">import com.acme.model.Person;
import com.google.common.collect.ImmutableSet;
import com.google.common.collect.Iterables;

...

public Set&lt;String&gt; getNames(Set&lt;Person&gt; persons) {
   return ImmutableSet.copyOf(Iterables.transform(persons, TO_NAME))
}</code></pre></div></div></section><section id="before-gradle-3-4"><h2>Before Gradle 3.4</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">apply plugin: 'java'

dependencies {
   compile project(':model')
   compile 'com.google.guava:guava:18.0'
}</code></pre></div></div></section><section id="but"><h2>But&#8230;&#8203;</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">// exported dependency
import com.acme.model.Person;
// internal dependencies
import com.google.common.collect.ImmutableSet;
import com.google.common.collect.Iterables;

...

public Set&lt;String&gt; getNames(Set&lt;Person&gt; persons) {
   return ImmutableSet.copyOf(
            Iterables.transform(persons, TO_NAME))
}</code></pre></div></div></section><section id="starting-from-gradle-3-4"><h2>Starting from Gradle 3.4</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">// This component has an API and an implementation
apply plugin: 'java-library'

dependencies {
   api project(':model')
   implementation 'com.google.guava:guava:18.0'
}</code></pre></div></div></section><section id="api-vs-impl-graph" data-state="show-dep-graph2"><h2>API vs impl graph</h2><div id="cy2" class="drawing"></div>

<script>
addDependencyGraph(2, function(cy) {
   var api = cy.filter('edge[kind="api"]');
   for (i=0; i<api.length; i++) {
      api[i].addClass('api');
   }
});
</script></section><section id="change-to-impl-dependency" data-state="show-dep-graph3"><h2>Change to impl dependency</h2><div id="cy3" class="drawing"></div>

<script>
addDependencyGraph(3, function(cy) {
   var api = cy.filter('edge[kind="api"]');
   for (i=0; i<api.length; i++) {
      api[i].addClass('api');
   }
   var highlightNextEle = function(elts){
       for (i=0; i<elts.length; i++) {
          (function(node) {
             var incomingEdges = node.incomers('edge');
             (function(incomingEdges) {
                setTimeout(function() {
                   node.addClass('highlighted');
                   for (j=0; j<incomingEdges.length; j++) {
                      incomingEdges[j].addClass('highlighted');
                      incomingEdges[j].source().addClass('highlighted');
                   };
                   //highlightNextEle(incomingEdges.sources());
                }, 1000);
             })(incomingEdges);
          })(elts[i]);
       }


   };

   // kick off first highlight
   highlightNextEle(cy.$('#i'));
});
</script></section><section id="change-to-api-dependency" data-state="show-dep-graph4"><h2>Change to API dependency</h2><div id="cy4" class="drawing"></div>

<script>
addDependencyGraph(4, function(cy) {
   var api = cy.filter('edge[kind="api"]');
   for (i=0; i<api.length; i++) {
      api[i].addClass('api');
   }
   var highlightNextEle = function(elts){
       for (i=0; i<elts.length; i++) {
          (function(node) {
             var incomingEdges = node.incomers('edge[kind="api"]');
             (function(incomingEdges) {
                setTimeout(function() {
                   node.addClass('highlighted');
                   for (j=0; j<incomingEdges.length; j++) {
                      incomingEdges[j].removeClass('api');
                      incomingEdges[j].addClass('highlighted');
                      incomingEdges[j].source().addClass('highlighted');
                   };
                   highlightNextEle(incomingEdges.sources());
                }, 1000);
             })(incomingEdges);
          })(elts[i]);
       }


   };

   // kick off first highlight
   highlightNextEle(cy.$('#h'));
});
</script></section></section>
<section><section id="consumers-are-not-equal" data-background-color="#01303a"><h2>Consumers are not equal</h2></section><section id="compile-classpath"><h2>Compile classpath</h2><div class="paragraph"><p>What does a <strong>compiler</strong> care about?</p></div>
<div class="ulist"><ul><li class="fragment"><p>Input: jars, or class directories</p></li><li class="fragment"><p>Jar: class files</p></li><li class="fragment"><p>Class file: both API and implementation</p></li></ul></div></section><section id="compile-classpath-2"><h2>Compile classpath</h2><div class="paragraph"><p>What we provide to the compiler</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class Foo {
    private int x = 123;

    public int getX() { return x; }
    public int getSquaredX() { return x * x; }
}</code></pre></div></div></section><section id="compile-classpath-3"><h2>Compile classpath</h2><div class="paragraph"><p>What the compiler cares about:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class Foo {
    public int getX()
    public int getSquaredX()
}</code></pre></div></div></section><section id="compile-classpath-4"><h2>Compile classpath</h2><div class="paragraph"><p>But it could also be</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class Foo {
    public int getSquaredX()
    public int getX()
}</code></pre></div></div>
<div class="paragraph"><p><strong>only public signatures matter</strong></p></div></section><section id="compile-classpath-snapshotting"><h2>Compile classpath snapshotting</h2><div class="ulist"><ul><li class="fragment"><p>Compute a hash of the signature of class : <code>aedb00fd</code></p></li><li class="fragment"><p>Combine hashes of all classes : <code>e45bdc17</code></p></li><li class="fragment"><p>Combine hashes of all input on classpath: <code>4500fc1</code></p></li><li class="fragment"><p>Result: hash of the compile classpath</p></li><li class="fragment"><p>Only consists of what is <em>relevant</em> to the <code>javac</code> compiler</p></li></ul></div></section><section id="runtime-classpath"><h2>Runtime classpath</h2><div class="paragraph"><p>What does the runtime care about?</p></div></section><section id="runtime-classpath-2"><h2>Runtime classpath</h2><div class="paragraph"><p>What does the runtime care about:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>public class Foo {
    private int x = 123;

    public int getX() { return x; }
    public int getSquaredX() { return x * x; }
}</code></pre></div></div>
<div class="paragraph"><p>At runtime, <strong>everything</strong> matters, from classes to resources.</p></div></section><section id="compile-vs-runtime-classpath"><h2>Compile vs runtime classpath</h2><div class="paragraph"><p>In practice:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@InputFiles
@CompileClasspath
FileCollection getCompileClasspath() { ... }

@InputFiles
@Classpath
FileCollection getRuntimeClasspath() { ... }</code></pre></div></div></section><section id="compile-avoidance-2"><h2>Compile avoidance</h2><div class="ulist"><ul><li><p><em>compile</em> and <em>runtime</em> classpath have different <em>semantics</em></p></li><li><p>Gradle makes the difference</p></li><li><p>Ignores irrelevant (non ABI) changes to compile classpath</p></li></ul></div></section><section id="effect-on-recompilations" data-state="show-dep-graph5"><h2>Effect on recompilations</h2><div id="cy5" class="drawing"></div>

<script>
addDependencyGraph(5, function(cy) {
   var api = cy.filter('edge[kind="api"]');
   for (i=0; i<api.length; i++) {
      api[i].addClass('api');
   }
   var highlightNextEle = function(elts, depth){
       if (depth>=1) { return; }
       for (i=0; i<elts.length; i++) {
          (function(node) {
             var incomingEdges = node.incomers('edge[kind="api"]');
             (function(incomingEdges) {
                setTimeout(function() {
                   node.addClass('highlighted');
                   for (j=0; j<incomingEdges.length; j++) {
                      incomingEdges[j].removeClass('api');
                      incomingEdges[j].addClass('highlighted');
                      incomingEdges[j].source().addClass('highlighted');
                   };
                   highlightNextEle(incomingEdges.sources(), depth+1);
                }, 1000);
             })(incomingEdges);
          })(elts[i]);
       }


   };

   // kick off first highlight
   highlightNextEle(cy.$('#h'), 0);
});
</script></section><section id="icing-on-the-cake"><h2>Icing on the cake</h2><div class="ulist"><ul><li><p>Upgrade a dependency from <code>1.0.1</code> to <code>1.0.2</code></p></li><li><p>If ABI hasn&#8217;t changed, Gradle will <em>not</em> recompile</p></li><li><p>Even if the name of the jar is different (<code>mydep-1.0.1.jar</code> vs <code>mydep-1.0.2.jar</code>)</p></li><li><p>Because only <em>contents</em> matter</p></li></ul></div></section></section>
<section id="incremental-compilation" data-background-color="#01303a"><h2>Incremental compilation</h2></section>
<section><section id="basics"><h2>Basics</h2><div class="ulist"><ul><li><p>Given a set of source files</p></li><li><p>Only compile the files which have changed&#8230;&#8203;</p></li><li><p>and their dependencies</p></li><li><p>Language specific</p></li></ul></div></section><section id="gradle-has-support-for-incremental-compilation-of-java"><h2>Gradle has support for incremental compilation of Java</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">compileJava {
    //enable incremental compilation
    options.incremental = true
}</code></pre></div></div>
<div class="admonitionblock note"><table><tr><td class="icon"><i class="fa fa-info-circle"></i></td><td class="content">Kotlin plugin implements its own incremental compilation</td></tr></table></div></section><section id="in-practice"><h2>In practice</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">import org.apache.commons.math3.complex.Complex;

public class Library {
    public Complex someLibraryMethod() {
        return Complex.I;
    }
}</code></pre></div></div>
<div class="ulist"><ul><li class="fragment"><p><code>Complex</code> is a dependency of <code>Library</code></p></li><li class="fragment"><p>if <code>Complex</code> is changed, we need to recompile <code>Library</code></p></li><li class="fragment"><p>if <code>ComplexUtils</code> is changed, no need to recompile</p></li></ul></div></section><section id="gotcha"><h2>Gotcha</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">import org.apache.commons.math3.dfp.Dfp;

public class LibraryUtils {
   public static int getMaxExp() {
      return Dfp.MAX_EXP;
   }
}</code></pre></div></div>
<div class="ulist"><ul><li class="fragment"><p><code>Dfp</code> is a dependency of <code>LibraryUtils</code></p></li><li class="fragment"><p>so if <code>MAX_EXP</code> changes, we should recompile <code>LibraryUtils</code>, right?</p></li></ul></div></section><section id="wait-a-minute"><h2>Wait a minute&#8230;&#8203;</h2><div class="quoteblock"><blockquote><div class="paragraph"><p><code>javap -v build/classes/java/main/LibraryUtils.class</code></p></div></blockquote></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code>...
  public static int getMaxExp();
    descriptor: ()I
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=0, args_size=0
         0: ldc           #3                  // int 32768
         2: ireturn</code></pre></div></div>
<div class="ulist"><ul><li><p>reference to <code>Dfp</code> is gone!</p></li><li><p>compiler <em>inlines</em> some constants</p></li><li><p>JLS says compiler doesn&#8217;t have to add the dependent class to constant pool</p></li></ul></div></section><section id="what-gradle-does"><h2>What Gradle does</h2><div class="ulist"><ul><li class="fragment"><p>Analyze all <em>bytecode</em> of all classes</p></li><li class="fragment"><p>Record which constants are used in which file</p></li><li class="fragment"><p>Whenever a producer changes, check if a <em>constant</em> changed</p></li><li class="fragment"><p>If yes, recompile <em>everything</em></p></li></ul></div></section></section>
<section id="annotation-processors"><h2>Annotation processors</h2><div class="ulist"><ul><li class="fragment"><p>Disable incremental compilation (working on it!)</p></li><li class="fragment"><p>Implementation of the annotation processors matter at compile time</p></li><li class="fragment"><p>Don&#8217;t add annotation processors to <em>compile classpath</em></p></li><li class="fragment"><p>or we cannot use smart classpath snapshotting</p></li></ul></div></section>
<section id="annotation-processors-2"><h2>Annotation processors</h2><div class="paragraph"><p>Use <code>annotationProcessorPath</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="groovy language-groovy">configurations {
    apt
}
dependencies {
    // The dagger compiler and its transitive dependencies will only be found on annotation processing classpath
    apt 'com.google.dagger:dagger-compiler:2.8'

    // And we still need the Dagger annotations on the compile classpath itself
    compileOnly 'com.google.dagger:dagger:2.8'
}

compileJava {
    options.annotationProcessorPath = configurations.apt
}</code></pre></div></div></section>
<section><section id="variant-aware-dependency-management" data-background-color="#01303a"><h2>Variant aware dependency management</h2></section><section id="producer-vs-consumer"><h2>Producer vs consumer</h2><div class="ulist"><ul><li class="fragment"><p>A <code>consumer</code> <em>depends on</em> a <code>producer</code></p></li><li class="fragment"><p>There are multiple requirements</p><div class="ulist"><ul><li><p>What is required to compile against a <code>producer</code>?</p></li><li><p>What is required at <em>runtime</em> for a specific configuration?</p></li><li><p>What artifacts does the producer offer?</p></li><li><p>Is the <code>producer</code> a sub-project or an external component?</p></li></ul></div></li></ul></div></section><section id="what-do-you-need-to-compile-against-a-component"><h2>What do you need to compile against a component?</h2><div class="ulist"><ul><li><p>Class files</p></li><li><p>Can be found in different forms:</p><div class="ulist"><ul><li><p>class directories</p></li><li><p>jars</p></li><li><p>aars, &#8230;&#8203;</p></li></ul></div></li></ul></div>
<div class="paragraph"><p><strong>Question</strong>: do we need to build a jar of the producer if all we want is to compile against it?</p></div></section><section id="discriminate-thanks-to-em-usage-em"><h2>Discriminate thanks to <em>usage</em></h2><div class="quoteblock"><blockquote><div class="paragraph"><p>Give me something that I can use to compile</p></div></blockquote><div class="attribution">&#8212; Consumer</div></div></section><section id="discriminate-thanks-to-em-usage-em-2"><h2>Discriminate thanks to <em>usage</em></h2><div class="quoteblock"><blockquote><div class="paragraph"><p>Sure, here&#8217;s a jar</p></div></blockquote><div class="attribution">&#8212; Producer</div></div></section><section id="discriminate-thanks-to-em-usage-em-3"><h2>Discriminate thanks to <em>usage</em></h2><div class="paragraph"><p>But we can be finer:</p></div>
<div class="quoteblock"><blockquote><div class="paragraph"><p>Sure, here&#8217;s a class directory</p></div></blockquote><div class="attribution">&#8212; Producer</div></div></section><section id="discriminate-thanks-to-em-usage-em-4"><h2>Discriminate thanks to <em>usage</em></h2><div class="paragraph"><p>Or smarter:</p></div>
<div class="quoteblock"><blockquote><div class="paragraph"><p>mmm, all I have is an AAR, but don&#8217;t worry, I know how to transform it to something you can use for compile</p></div></blockquote><div class="attribution">&#8212; Producer</div></div></section><section id="the-java-library-plugin"><h2>The Java Library Plugin</h2><div class="ulist"><ul><li><p>will provide consumers with a <em>class directory</em> for compile</p></li><li><p>will provide consumers with a <em>jar</em> for runtime</p></li></ul></div>
<div class="paragraph"><p>As a consequence:</p></div>
<div class="ulist"><ul><li><p>only <code>classes</code> task will be triggerred when compiling</p></li><li><p><code>jar</code> (and therefore <code>processResources</code>) only triggerred when needed at runtime</p></li></ul></div></section></section>
<section><section id="conclusion" data-background-color="#01303a"><h2>Conclusion</h2></section><section id="use-the-java-library-plugin"><h2>Use the Java Library Plugin!</h2><div id="chart"></div>
<script>
dependencyGraphs.push(function() {
   var chart = c3.generate({
       data: {
           rows: [
            ['Scenario','Maven 3.3.9','Gradle 3.3','Gradle 4.0'],
            ['Large project 1 change',20.80,13.10,1.30],
            ['Medium project 1 change',5.70,1.30,0.26],
            ['Multi project ABI-breaking change',26.80,15.80,3.30],
            ['Multi project ABI-compatible change',26.80,16.30,1.40]],
           type: 'bar',
           x: 'Scenario',
           labels: true
       },
       axis: {
           x: {
               type: 'category'
           },
           y: {
               label: 'seconds'
           }
       },
       legend: {
          position: 'right'
       }
   });
});
</script>
<div class="paragraph"><p>Slides: <a href="https://melix.github.io/javaone-2017-max-incremental" class="bare">https://melix.github.io/javaone-2017-max-incremental</a>
Discuss: @CedricChampeau</p></div></section></section>
<section id="thank-you" data-background-color="#01303a"><h2>Thank you!</h2></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: true,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'summit',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'linear',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>